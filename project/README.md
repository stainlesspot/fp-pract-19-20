#### Не забравяйте да сложите `.stack-work` и `project.cabal` в `.gitignore`-а си!

## Setup
Инсталирайте `stack` - [инструкции за инсталиране](https://docs.haskellstack.org/en/stable/install_and_upgrade/)

## Инструкции за слагане на готов еднофайлов проект в шаблона

0. Взимате си сорс кода, слагате го в `src/Lib.hs`, внимавайки да не затриете
    ```haskell
    module Lib where
    ```
    от най-горе.
1. Ако имате някакво `IO ()`, което е "входна" точка на програмата ви,
    правите тя да се казва `main` (т.е. сменяте тялото на наличния
    ```haskell
    main :: IO ()
    main = putStrLn "Hi!"
    ```
    да е каквото ви трябва на вас.)
2. Слагате каквито външни пакети ползвате под секцията `dependencies` в
    `package.yaml` файла. Например в момента там седят пакетите:
    * [`base`](https://hackage.haskell.org/package/base)
    (ограничен до версии по-нови или равни на 4.7 по-стари от 5 - не е важно)
    * [`hlint-source-plugin`](https://github.com/ocharles/hlint-source-plugin) -
    пакетът който позволява автоматичното пускане на `hlint` върху сорс файловете ви

    На вас ви трябва [`Data.Map.Lazy`](https://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Lazy.html) от [`containers`](https://hackage.haskell.org/package/containers-0.6.2.1).

    Слагате на нов ред
    ```yaml
    - containers
    ```
    и сте готови.

    Секцията `dependencies` вече изглежда така:
    ```yaml
    dependencies:
    - base >= 4.7 && < 5
    - hlint-source-plugin
    - containers
    ```

## Running
**N.B. Първото пускане ще отнеме сравнитлено голямо количество време,
тъй като `stack` тегли специфична версия на `ghc` и специфични пакети за нея, които са проверени че работят заедно. Освен това компилирането на `hlint` също ще отнеме малко време.**

За да използвате настройките от `package.yaml` файла (вкл. външни пакети, предупреждения, `hlint`), трябва да извиквате `stack`, **не** директно `ghc`.

Извиквания на `stack`:
* `stack build` - компилира source файловете ви
* `stack ghci` - пуска `ghci` в което са заредени source файловете ви
* `stack run` - изпълнява `main` действието

Флагът `--file-watch` на `stack` е много удобен - когато го подадете към
`stack build/test` автоматично прекомпилира, при промяна на някой source файл.

Примери:
* `stack ghci`
* `stack build --file-watch`

## Structure
В `src` можете да слагате всичките си файлове от проекта.

В `package.yaml` седят разни опции на компилатора, например предупреждения.

По време на разработка може да е полезно да се закоментира `-Werror` временно,
за да може да се отложи оправянето им.

При ползата на допълнителни пакети те се слагат под секцията `dependencies`.

## Code cleanliness
Автоматично се пуска `hlint` върху сорс файловете ви,
изкарвайки предупреждения (съответно грешки, благодарение на `-Werror`
по време на компилация).

Това е "linter" - програма която автоматично търси често срещани подобрения на кода.
